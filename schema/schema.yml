openapi: 3.0.2
info:
  title: Sohosai Online System
  version: '1.0'
servers:
  - url: http://localhost:3000
tags:
  - name: projects
    description: 企画関連の操作
  - name: users
    description: ユーザー関連の操作
  - name: news
    description: ニュース関連の操作
  - name: forms
    description: 申請関連の操作
  - name: form-answers
    description: 申請結果関連の操作
  - name: invitations
    description: 招待関連の操作
  - name: committee
    description: 実委人のみが利用可能
paths:
  /projects:
    get:
      summary: 企画一覧の取得
      tags:
        - projects
        - committee
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
    post:
      summary: 企画の作成
      tags:
        - projects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProject'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /projects/me:
    get:
      summary: 自分が企画責任者・副企画責任者になっている企画の取得
      tags:
        - projects
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      summary: 自分が企画責任者・副企画責任者になっている企画の更新
      tags:
        - projects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProject'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /projects/{project_id}:
    get:
      summary: 特定のIDの企画の取得
      tags:
        - projects
        - committee
      parameters:
        - name: project_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      summary: 特定のIDの企画の更新
      tags:
        - projects
        - committee
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProject'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
    delete:
      summary: 特定のIDの企画の削除
      tags:
        - projects
        - committee
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /projects/{project_id}/forms:
    get:
      summary: 特定のIDの企画に対する全ての申請を取得
      tags:
        - forms
      parameters:
        - name: project_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Form'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /projects/{project_id}/forms/{form_id}/answer:
    get:
      summary: 特定のIDの企画の、特定のIDの申請に対する回答を取得
      tags:
        - form-answers
      parameters:
        - name: project_id
          in: path
          schema:
            type: string
          required: true
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FormAnswer'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    post:
      summary: 特定のIDの企画の、特定のIDの申請に対する回答を作成
      tags:
        - form-answers
        - committee
      parameters:
        - name: project_id
          in: path
          schema:
            type: string
          required: true
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFormAnswer'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
    put:
      summary: 特定のIDの企画の、特定のIDの申請に対する回答を更新
      tags:
        - form-answers
      parameters:
        - name: project_id
          in: path
          schema:
            type: string
          required: true
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFormAnswer'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /projects/{project_id}/news:
    get:
      summary: 特定のIDの企画に対するニュース一覧の取得
      tags:
        - news
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/News'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /users:
    get:
      summary: ユーザー一覧の取得
      tags:
        - users
        - committee
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
    post:
      summary: ユーザーの作成
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUser'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /users/me:
    get:
      summary: 自分のユーザーの取得
      tags:
        - users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    put:
      summary: 自分のユーザーの更新
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUser'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /users/{user_id}:
    get:
      summary: 特定のIDのユーザーの取得
      tags:
        - users
        - committee
      parameters:
        - name: user_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      summary: 特定のIDのユーザーの更新
      tags:
        - users
        - committee
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUser'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
    delete:
      summary: 特定のIDのユーザーの削除
      tags:
        - users
        - committee
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /news:
    get:
      summary: ニュース一覧の取得
      tags:
        - news
        - committee
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/News'
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    post:
      summary: ニュースの作成
      tags:
        - news
        - committee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNews'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /news/{news_id}:
    get:
      summary: 特定のIDのニュースの取得
      tags:
        - news
      parameters:
        - name: news_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/News'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      summary: 特定のIDのニュースの更新
      tags:
        - news
        - committee
      parameters:
        - name: news_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNews'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
    delete:
      summary: 特定のIDのニュースの削除
      tags:
        - news
        - committee
      parameters:
        - name: news_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /invitations:
    get:
      summary: 招待一覧の取得
      tags:
        - invitations
        - committee
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Invitation'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
    post:
      summary: 招待の作成
      tags:
        - invitations
        - committee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvitation'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invitation'
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /invitations/{invitation_id}:
    get:
      summary: 特定のIDの招待の取得
      tags:
        - invitations
        - committee
      parameters:
        - name: invitation_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invitation'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    post:
      summary: 特定のIDの招待の受諾
      tags:
        - invitations
      parameters:
        - name: invitation_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    delete:
      summary: 招待の削除
      tags:
        - invitations
        - committee
      parameters:
        - name: invitation_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /forms:
    get:
      summary: 申請一覧の取得
      tags:
        - forms
        - committee
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Form'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal Server Error
    post:
      summary: 申請の作成
      tags:
        - forms
        - committee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateForm'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
  /forms/{form_id}:
    get:
      summary: 特定のIDの申請を取得
      tags:
        - forms
      parameters:
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Form'
        '401':
          description: Unauthorized
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      summary: 特定のIDの申請を更新
      tags:
        - forms
        - committee
      parameters:
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateForm'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal Server Error
    delete:
      summary: 特定のIDの申請を削除
      tags:
        - forms
        - committee
      parameters:
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /forms/{form_id}/answers:
    get:
      summary: 特定のIDの申請に対する全ての回答を取得
      tags:
        - form-answers
        - committee
      parameters:
        - name: form_id
          in: path
          schema:
            type: string
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FormAnswer'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
components:
  securitySchemes:
    Bearer:
      type: apiKey
      name: Firebase Token
      in: header
      description: Firebaseのトークン
  schemas:
    Project:
      type: object
      properties:
        id:
          type: string
          format: uuid
        index:
          type: integer
        title:
          type: string
        kana_title:
          type: string
        group_name:
          type: string
        kana_group_name:
          type: string
        category:
          type: string
          enum:
            - general
            - foods_with_kitchen
            - foods_without_kitchen
            - foods_without_cooking
            - stage_1a
            - stage_university_hall
            - stage_united
        attributes:
          type: integer
        owner_id:
          type: string
          format: uuid
        sub_owner_id:
          type: string
          format: uuid
          nullable: true
        remarks:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
          nullable: true
    CreateProject:
      type: object
      properties:
        title:
          type: string
        kana_title:
          type: string
        group_name:
          type: string
        kana_group_name:
          type: string
        category:
          type: string
          enum:
            - general
            - foods_with_kitchen
            - foods_without_kitchen
            - foods_without_cooking
            - stage_1a
            - stage_university_hall
            - stage_united
        attributes:
          type: integer
    UpdateProject:
      type: object
      properties:
        title:
          type: string
        kana_title:
          type: string
        group_name:
          type: string
        kana_group_name:
          type: string
        category:
          type: string
          enum:
            - general
            - foods_with_kitchen
            - foods_without_kitchen
            - foods_without_cooking
            - stage_1a
            - stage_university_hall
            - stage_united
        attributes:
          type: integer
        remarks:
          type: string
    Form:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        description:
          type: string
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
        categories:
          type: integer
        items:
          type: array
          schema:
            type: FormItem
    FormAnswer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        project_id:
          type: string
          format: uuid
        form_id:
          type: string
          format: uuid
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
        items:
          type: object
    UpdateFormAnswer:
      type: object
      properties:
        items:
          type: object
    CreateFormAnswer:
      type: object
      properties:
        items:
          type: object
    News:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        body:
          type: string
        categories:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
          nullable: true
    User:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        kana_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        role:
          type: string
          enum:
            - administrator
            - committee_operator
            - committee
            - general
        category:
          type: string
          enum:
            - undergraduate
            - graduate
            - academic_staff
    CreateUser:
      type: object
      properties:
        name:
          type: string
        kana_name:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          format: password
        phone_number:
          type: string
        category:
          type: string
          enum:
            - undergraduate
            - graduate
            - academic_staff
    UpdateUser:
      type: object
      properties:
        name:
          type: string
        kana_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        role:
          type: string
          enum:
            - administrator
            - committee_operator
            - committee
            - general
        category:
          type: string
          enum:
            - undergraduate
            - graduate
            - academic_staff
    CreateNews:
      type: object
      properties:
        title:
          type: string
        body:
          type: string
        categories:
          type: integer
    UpdateNews:
      type: object
      properties:
        title:
          type: string
        body:
          type: string
        categories:
          type: integer
    Invitation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        project_id:
          type: string
          format: uuid
        position:
          type: string
          enum:
            - owner
            - sub_owner
        inviter:
          type: string
        invitee_email:
          type: string
        invitee:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
          nullable: true
    CreateInvitation:
      type: object
      properties:
        project_id:
          type: string
          format: uuid
        position:
          type: string
          enum:
            - owner
            - sub_owner
        invitee_email:
          type: string
          format: email
    CreateForm:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
        categories:
          type: integer
        items:
          type: array
          schema:
            type: FormItem
    UpdateForm:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
        categories:
          type: integer
        items:
          type: array
          schema:
            type: FormItem
